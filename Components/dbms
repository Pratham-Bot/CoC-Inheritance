AIM : DDL DML operations on database views

Name : Labib Asari 			Reg ID : 211070045


Initial Login : 



THEORY: 
The DDL commands that are used in SQL are CREATE, DROP, ALTER, TRUNCATE, etc. The DML commands used in SQL are INSERT, UPDATE, DELETE, SELECT, etc. 

SQL Server ➜ Views ➜ DDL Statements and Views – Creating a View
DDL Statements and Views – Creating a View
Views, by default, do not exist physically—that is, their content is not stored on the disk. (This is not true for so-called indexed views, which are discussed later in this chapter.) Views are database objects that are always derived from one or more base tables (or views) using metadata information. This information (including the name of the view and the way the rows from the base tables are to be retrieved) is the only information concerning views that is physically stored. Thus, views are also called virtual tables.
Creating a View
A view is created using the CREATE VIEW statement. The general form of this statement is
CREATE VIEW view_name [(column_list)]
	[WITH {ENCRYPTION | SCHEMABINDING | VIEW_METADATA}]
	AS select_statement
	[WITH CHECK OPTION]


OPERATIONS TO BE EXECUTED:

1. Create: create database database_name;
2. Use database: use database_name;
3. Create multiple views on same tables
4. Describe view_name;
5. Show create table view_name;
6. Insert into view_name;
7. Update view
8. Delete records from view
9. Create or Replace view view_name as select column_name from table_name;
10. Alter view (add) alter table table_name add column column_name;
11. Alter view (drop) alter table table_name drop column column_name;

Commands for reference


1
Create view
Allowed
2
Create or replace view
Allowed
3
Alter view
Not Allowed
4
Drop view
Allowed
5
Rename 
Allowed
6
Insert view
Allowed
7
Select view
Allowed
8
Update view
Allowed
9
Delete view
Allowed
10
Truncate view
Not Allowed



















MariaDB [(none)]> create Database emp_db
    -> ;
Query OK, 1 row affected (0.001 sec)


MariaDB [(none)]> use emp_db
Database changed
MariaDB [emp_db]> create table employee
    -> ;
ERROR 1113 (42000): A table must have at least 1 column
MariaDB [emp_db]> create table employee(e_id int,name varchar(100),salary float,address varchar(100));
Query OK, 0 rows affected (0.006 sec)


MariaDB [emp_db]> show tables;
+------------------+
| Tables_in_emp_db |
+------------------+
| employee         |
+------------------+
1 row in set (0.001 sec)


MariaDB [emp_db]> insert employee values(1,"Labib",100000000,"Malad East"); 
Query OK, 1 row affected (0.002 sec)


MariaDB [emp_db]> insert employee values(2,"Diemos",100000000000,"Sin City");
Query OK, 1 row affected (0.002 sec)


MariaDB [emp_db]> select * from employee;
+------+------------+--------------+------------+
| e_id | name       | salary       | address    |
+------+------------+--------------+------------+
|    1 | Labib |    100000000 | Malad East |
|    2 | Diemos     | 100000000000 | Sin City   |
+------+------------+--------------+------------+
2 rows in set (0.001 sec)


MariaDB [emp_db]> insert employee values(3,"D",100,"Vice City");
Query OK, 1 row affected (0.003 sec)


MariaDB [emp_db]> insert employee values(4,"DAmnnn",10000000,"kanto");
Query OK, 1 row affected (0.002 sec)


MariaDB [emp_db]> select * from employee;
+------+------------+--------------+------------+
| e_id | name       | salary       | address    |
+------+------------+--------------+------------+
|    1 | Labib |    100000000 | Malad East |
|    2 | Diemos     | 100000000000 | Sin City   |
|    3 | D          |          100 | Vice City  |
|    4 | DAmnnn     |     10000000 | kanto      |
+------+------------+--------------+------------+
4 rows in set (0.001 sec)


MariaDB [emp_db]> create view v1 as (select name,salary from employee);
Query OK, 0 rows affected (0.005 sec)


MariaDB [emp_db]> select * from v1;
+------------+--------------+
| name       | salary       |
+------------+--------------+
| Labib |    100000000 |
| Diemos     | 100000000000 |
| D          |          100 |
| DAmnnn     |     10000000 |
+------------+--------------+
4 rows in set (0.002 sec)


MariaDB [emp_db]> create view v2 as (select e_id,address from employee where salary>50000);
Query OK, 0 rows affected (0.004 sec)


MariaDB [emp_db]> select * from v2;
+------+------------+
| e_id | address    |
+------+------------+
|    1 | Malad East |
|    2 | Sin City   |
|    4 | kanto      |
+------+------------+
3 rows in set (0.002 sec)


MariaDB [emp_db]> show tables;
+------------------+
| Tables_in_emp_db |
+------------------+
| employee         |
| v1               |
| v2               |
+------------------+
3 rows in set (0.001 sec)


MariaDB [emp_db]> describe v1;
+--------+--------------+------+-----+---------+-------+
| Field  | Type         | Null | Key | Default | Extra |
+--------+--------------+------+-----+---------+-------+
| name   | varchar(100) | YES  |     | NULL    |       |
| salary | float        | YES  |     | NULL    |       |
+--------+--------------+------+-----+---------+-------+
2 rows in set (0.003 sec)


MariaDB [emp_db]> describe v2;
+---------+--------------+------+-----+---------+-------+
| Field   | Type         | Null | Key | Default | Extra |
+---------+--------------+------+-----+---------+-------+
| e_id    | int(11)      | YES  |     | NULL    |       |
| address | varchar(100) | YES  |     | NULL    |       |
+---------+--------------+------+-----+---------+-------+
2 rows in set (0.003 sec)


MariaDB [emp_db]> show create tablle v1;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'tablle v1' at line 1
MariaDB [emp_db]> show create table v1;
+------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+
| View | Create View                                                                                                                                                             | character_set_client | collation_connection |
+------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+
| v1   | CREATE ALGORITHM=UNDEFINED DEFINER=`user123`@`%` SQL SECURITY DEFINER VIEW `v1` AS (select `employee`.`name` AS `name`,`employee`.`salary` AS `salary` from `employee`) | utf8mb3              | utf8mb3_general_ci   |
+------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+
1 row in set (0.001 sec)


MariaDB [emp_db]> select * from v1;
+------------+--------------+
| name       | salary       |
+------------+--------------+
| Labib |    100000000 |
| Diemos     | 100000000000 |
| D          |          100 |
| DAmnnn     |     10000000 |
+------------+--------------+
4 rows in set (0.001 sec)


MariaDB [emp_db]> insert v1 values(5,"Dh",100000,"Lost City");
ERROR 1136 (21S01): Column count doesn't match value count at row 1
MariaDB [emp_db]> insert v1 values("Dh",100000);
Query OK, 1 row affected (0.002 sec)


MariaDB [emp_db]> select * from v1;
+------------+--------------+
| name       | salary       |
+------------+--------------+
| Labib |    100000000 |
| Diemos     | 100000000000 |
| D          |          100 |
| DAmnnn     |     10000000 |
| Dh         |       100000 |
+------------+--------------+
5 rows in set (0.001 sec)


MariaDB [emp_db]> select * from employee;
+------+------------+--------------+------------+
| e_id | name       | salary       | address    |
+------+------------+--------------+------------+
|    1 | Labib |    100000000 | Malad East |
|    2 | Diemos     | 100000000000 | Sin City   |
|    3 | D          |          100 | Vice City  |
|    4 | DAmnnn     |     10000000 | kanto      |
| NULL | Dh         |       100000 | NULL       |
+------+------------+--------------+------------+
5 rows in set (0.001 sec)


MariaDB [emp_db]> update v1 set name="Deimos" where name='Dh';
Query OK, 1 row affected (0.002 sec)
Rows matched: 1  Changed: 1  Warnings: 0


MariaDB [emp_db]> select * from v1;
+------------+--------------+
| name       | salary       |
+------------+--------------+
| Labib |    100000000 |
| Diemos     | 100000000000 |
| D          |          100 |
| DAmnnn     |     10000000 |
| Deimos     |       100000 |
+------------+--------------+
5 rows in set (0.001 sec)


MariaDB [emp_db]> select * from employee;
+------+------------+--------------+------------+
| e_id | name       | salary       | address    |
+------+------------+--------------+------------+
|    1 | Labib |    100000000 | Malad East |
|    2 | Diemos     | 100000000000 | Sin City   |
|    3 | D          |          100 | Vice City  |
|    4 | DAmnnn     |     10000000 | kanto      |
| NULL | Deimos     |       100000 | NULL       |
+------+------------+--------------+------------+
5 rows in set (0.001 sec)


MariaDB [emp_db]> delete from v1 where name='Deimos'
    -> ;
Query OK, 1 row affected (0.002 sec)


MariaDB [emp_db]> select * from v1;
+------------+--------------+
| name       | salary       |
+------------+--------------+
| Labib |    100000000 |
| Diemos     | 100000000000 |
| D          |          100 |
| DAmnnn     |     10000000 |
+------------+--------------+
4 rows in set (0.001 sec)


MariaDB [emp_db]> select * from employee;
+------+------------+--------------+------------+
| e_id | name       | salary       | address    |
+------+------------+--------------+------------+
|    1 | Labib |    100000000 | Malad East |
|    2 | Diemos     | 100000000000 | Sin City   |
|    3 | D          |          100 | Vice City  |
|    4 | DAmnnn     |     10000000 | kanto      |
+------+------------+--------------+------------+
4 rows in set (0.002 sec)


MariaDB [emp_db]> create or replace view v2 as select e_id,name from employee;
Query OK, 0 rows affected (0.004 sec)


MariaDB [emp_db]> select * from employee;
+------+------------+--------------+------------+
| e_id | name       | salary       | address    |
+------+------------+--------------+------------+
|    1 | Labib |    100000000 | Malad East |
|    2 | Diemos     | 100000000000 | Sin City   |
|    3 | D          |          100 | Vice City  |
|    4 | DAmnnn     |     10000000 | kanto      |
+------+------------+--------------+------------+
4 rows in set (0.001 sec)


MariaDB [emp_db]> show tables;
+------------------+
| Tables_in_emp_db |
+------------------+
| employee         |
| v1               |
| v2               |
+------------------+
3 rows in set (0.001 sec)


MariaDB [emp_db]> select * v2
    -> ;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'v2' at line 1
MariaDB [emp_db]> select * from v2;
+------+------------+
| e_id | name       |
+------+------------+
|    1 | Labibemp_db |
|    2 | Diemos     |
|    3 | D          |
|    4 | DAmnnn     |
+------+------------+
4 rows in set (0.002 sec)


MariaDB [emp_db]> alter table v2 add address;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '' at line 1
MariaDB [emp_db]> alter table v2 add age int;
ERROR 1347 (HY000): 'emp_db.v2' is not of type 'BASE TABLE'
MariaDB [emp_db]> dreop view v1;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'dreop view v1' at line 1
MariaDB [emp_db]> drop view v1;
Query OK, 0 rows affected (0.003 sec)


MariaDB [emp_db]> 

Conclusion : 

Studied ddl and dml operations on views
